<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>keyvi Crashcourse</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="keyvi-small.png"/></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_doc_usage__crashcourse.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">keyvi Crashcourse </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h3>Install</h3>
<p>After installation you should have <code>keyvi</code> executable available:</p>
<p>Try: </p>
<pre class="fragment">keyvi -h
</pre><p>Try in python: </p>
<pre class="fragment">import pykeyvi
</pre><h3>First compile and decompile</h3>
<p>Open a text editor and put some keys in there, e.g. </p>
<pre class="fragment">keyvi
is
a
key
value
index
</pre><p>Compile: </p>
<pre class="fragment">keyvi compile &lt;input_file&gt; compiled.kv key-only
</pre><p>Dump: </p>
<pre class="fragment">keyvi dump compiled.kv dump.out
</pre><p>After dumping, open the file dump.out in a text editor, it should contain your data.</p>
<p>Check questions:</p>
<ul>
<li>What is the difference to your input file?</li>
</ul>
<h4>Open the file in python</h4>
<p>Do: </p>
<pre class="fragment">import pykeyvi
d = pykeyvi.Dictionary("compiled.kv")
"keyvi" in d
</pre><p>should return True </p>
<pre class="fragment">match = d['keyvi']
</pre><p>gives you a so called match object </p>
<pre class="fragment">dir(match)
</pre><p>shows all methods you can call on that object, e.g. </p>
<pre class="fragment">match.GetMatchedString()
</pre><p>should return "keyvi"</p>
<p>Match objects are the common return structure in keyvi. For this very simple example, the other methods are not useful. But with going deeper into more elaborated examples below, you will find how they can be used.</p>
<p>Check questions:</p>
<ul>
<li>How fast does it load? Do you have an idea how loading works internally?</li>
<li>What happens if you load multiple times (using different processes)?</li>
</ul>
<h3>Simple Statistics</h3>
<p>Both, the <code>keyvi</code> executable and the Python API provide an easy way to obtain the number of keys and values in a keyvi file.</p>
<p>For the just created <code>compiled.kv</code> file run: </p>
<pre class="fragment">keyvi stats compiled.kv
</pre><p>The output should be:</p>
<p>``` { "General": { "manifest": "", "number_of_keys": "6", "number_of_states": "14", "start_state": "19", "value_store_type": "1", "version": "2" }, "Persistence": { "size": "280", "version": "2" } } ```</p>
<p>Note: As we have compiled <code>key-only</code> dictionary there is no info regarding values.</p>
<p>Similarly with python, on the <code>pykeyvi.Dictionary</code> object <code>d</code> the call <code>d.GetStatistics()</code> will return the same information.</p>
<h3>Lookup and Extraction</h3>
<p>Go to <a href="/pykeyvi/examples/lookup">lookup examples</a></p>
<p>Compile cities.tsv and run the tester: </p>
<pre class="fragment">keyvicompiler -i cities.tsv -o cities.keyvi -d key-only
python text_lookup_tester.py
</pre><p>Try queries like: "Fahrradwerkstatt MÃ¼nchen", "Berlin Alexanderplatz", "San Francisco Coffee Bar"</p>
<h4>Build your own index</h4>
<p>Try pykeyvi/scripts/compile_json.py and compile your own JSON. The format should be: </p>
<pre class="fragment">key {"city": "Munich", "state": "Germany"}
</pre><p>(put a tab ('') between key and value, you can also use keyvicompiler instead, but the idea of this excercise is to use the compiler from the python bindings.)</p>
<p>Check statistics:</p>
<pre class="fragment"> keyviinspector -i your-own.keyvi -s
</pre><p>Check questions:</p>
<ul>
<li>Compare values and unique value, whats the meaning of it?</li>
</ul>
<p>With sharding (for distributed data indexes): </p>
<pre class="fragment"> compile_json.py -i your-input -o your-keyvi.keyvi -s 3
</pre><h3>Completion</h3>
<p>Go to <a href="/pykeyvi/examples/completion">completion examples</a></p>
<h4>Prefix completion</h4>
<p>Have a look at the files completion-nw.tsv, completion.tsv it basically contains keys and integer values:</p>
<p>Compile and try: </p>
<pre class="fragment">keyvicompiler -i completion-nw.tsv -o prefix-completion.keyvi 
python prefix_completion_tester.py
</pre><p>Query: '80s'</p>
<p>Now try: </p>
<pre class="fragment">keyvicompiler -i completion.tsv -o prefix-completion.keyvi
python prefix_completion_tester.py
</pre><p>Check questions:</p>
<ul>
<li>What's the difference between the 2?</li>
<li>What if you have more data?</li>
<li>Advanced: How does it work?</li>
</ul>
<h4>Fuzzy Prefix completion</h4>
<p>Try: </p>
<pre class="fragment">python prefix_completion_fuzzy_tester.py
</pre><p>and use misspelled queries like '80s movie wit sombies'</p>
<h4>Multiword Completion</h4>
<p>Compile with: </p>
<pre class="fragment">cat completion.tsv | python multiword_completion_writer.py
</pre><p>and try: </p>
<pre class="fragment">python multiword_completion_tester.py
</pre><p>e.g. 'zombies movie'</p>
<p>Check questions:</p>
<ul>
<li>What is the size difference between multiword and pure prefix?</li>
<li>What is more complex in multiword?</li>
<li>Why is it still 'relative small'?</li>
</ul>
<h3>Normalization</h3>
<p>Go to <a href="/pykeyvi/examples/normalization">normalization examples</a></p>
<p>Compile with: </p>
<pre class="fragment">keyvicompiler -i normalization.tsv -o normalization.keyvi -d string
</pre><p>and try: </p>
<pre class="fragment">cat sample.txt | python normalize.py</pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Nov 3 2017 15:07:06 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
